export default class Translator{options={user:"default",languaje:{language:"ENG",resources:[]}};constructor(t={}){this.options=Object.assign(this.options,t),this.setLanguaje(this.options.languaje)}setLanguaje=function(t=[{language:"ENG",resources:[]}]){localStorage.setItem(this.options.user+"_t_language",t.language),this.resources=t.resources,this.initialize()};initialize=function(t=["*"]){let e=this;for(let a=0;a<t.length;a++)t[a]=t[a]+"[tkey]",$(t[a]).each((function(t,a){if(null!=(a=$(this)).attr("tkey")){JSON.parse(a.attr("tkey")).forEach((t=>{e.setTranslated(a,t)}))}}))};translateSection=function(t){let e=this;setTimeout((()=>{e.initialize(t)}),200)};setTranslated=function(t,e){let a=e[0],r=e[1],s=this.translate(r),n=1e3*(e[2]||0)/s.length;switch(a.toLowerCase()){case"html":t.html("&nbsp;"),[...s].forEach(((e,a)=>{setTimeout((()=>{t.html(t.html()+e)}),n*a)}));break;case"value":t.val(""),[...s].forEach(((e,a)=>{setTimeout((()=>{t.val(t.val()+e)}),s.length*a/n)}));break;default:t.attr(a,""),[...s].forEach(((e,r)=>{setTimeout((()=>{t.attr(a,t.attr(a)+e)}),s.length*r/n)}))}};translate=function(t){let e=this;if(null!=t&&""!=t)try{let a=new Array;try{a=JSON.parse(t)}catch(e){0==Array.isArray(t)?a.push(t):a=t}let r=t,s=t;return this.resources.forEach((t=>{if(t.key.toLowerCase()==a[0].toLowerCase()){if(!(a.length>1))return r=t.value,!1;r=t.key,s=t.value,a.forEach((function(a,n){a!=t.key&&(r=s=s.replace("{"+(n-1)+"}",e.translate(a)))}))}})),r}catch(e){return console.error("Error on Translator.translate:",e.message),t}return t}}